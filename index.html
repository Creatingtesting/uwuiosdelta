<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luau Code Obfuscator</title>
    <style>
        body {
            background: linear-gradient(135deg, #1e1e2f, #2a2a4e);
            color: #ffffff;
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .container {
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
            width: 700px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        h1 {
            font-size: 2em;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ffff;
        }
        textarea {
            width: 100%;
            height: 150px;
            background: #2e2e4e;
            border: 1px solid #00ffff;
            border-radius: 10px;
            color: #ffffff;
            padding: 10px;
            font-family: 'Courier New', monospace;
            resize: none;
        }
        .buttons {
            margin: 20px 0;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        .toggles {
            margin: 10px 0;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }
        button {
            padding: 10px 20px;
            background: linear-gradient(45deg, #00ffff, #ff00ff);
            border: none;
            border-radius: 5px;
            color: #ffffff;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin: 5px;
        }
        button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }
        label {
            margin: 5px;
            font-size: 0.9em;
        }
        #output {
            background: #1e1e2f;
            border: 1px solid #ff00ff;
            border-radius: 10px;
            padding: 10px;
            min-height: 250px;
            text-align: left;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        .glow {
            animation: glow 1.5s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from {
                box-shadow: 0 0 10px #00ffff;
            }
            to {
                box-shadow: 0 0 20px #ff00ff;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="glow">Luau Code Obfuscator</h1>
        <textarea id="inputCode" placeholder="Enter your Luau code here..."></textarea>
        <div class="toggles">
            <label><input type="checkbox" id="antiTamper"> Anti Tamper</label>
            <label><input type="checkbox" id="maxProtection"> Maximum Protection</label>
            <label><input type="checkbox" id="24Protection"> 24/7 Protection</label>
            <label><input type="checkbox" id="over80kb"> Over 80KB Size</label>
        </div>
        <div class="buttons">
            <button onclick="obfuscate('base64')">Base64 Strings</button>
            <button onclick="obfuscate('xor')">XOR Strings</button>
            <button onclick="obfuscate('rename')">Variable Renaming</button>
            <button onclick="obfuscate('control')">Control Flow</button>
            <button onclick="obfuscate('max')">Obfuscate Using Everything</button>
            <button onclick="copyCode()">Copy Code</button>
        </div>
        <h2>Obfuscated Code</h2>
        <div id="output"></div>
    </div>

    <script>
        // Sample Luau code if none provided
        const defaultCode = `local player = game.Players.LocalPlayer
local function greet(name)
    print("Hello, " .. name .. "!")
end
greet(player.Name)
for i = 1, 5 do
    print("Count: " .. i)
end`;

        // Base64 decode function for Luau
        const base64DecodeFn = `
local function b64decode(str)
    local b = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
    local t = {}
    for i = 1, #str do
        local c = string.sub(str, i, i)
        if c ~= '=' then
            local v = string.find(b, c) - 1
            table.insert(t, v)
        end
    end
    local r = {}
    for i = 1, #t, 4 do
        local v1, v2, v3, v4 = t[i], t[i+1], t[i+2], t[i+3]
        local a = bit32.rshift(v1 * 4 + bit32.rshift(v2, 4), 0)
        local b = bit32.rshift(bit32.band(v2, 15) * 16 + bit32.rshift(v3 or 0, 2), 0)
        local c = bit32.rshift(bit32.band(v3 or 0, 3) * 64 + (v4 or 0), 0)
        table.insert(r, string.char(a))
        if v3 then table.insert(r, string.char(b)) end
        if v4 then table.insert(r, string.char(c)) end
    end
    return table.concat(r)
end
`;

        // XOR decode function for Luau
        const xorDecodeFn = `
local function xorDecode(str, key)
    local result = {}
    for i = 1, #str do
        local char = string.byte(str, i)
        table.insert(result, string.char(bit32.bxor(char, key)))
    end
    return table.concat(result)
end
`;

        // Anti-tamper function (simple hash check example)
        const antiTamperFn = `
local function checkTamper()
    local scriptSource = [[${placeholder}]]  -- Placeholder for script hash or source
    if game:GetService("HttpService"):GenerateGUID(false) ~= scriptSource then  -- Simplified tamper check
        error("Script tampered!")
    end
end
checkTamper()
`;

        // 24/7 protection (infinite loop in a thread to "protect" - caution: may impact performance)
        const protection247Fn = `
spawn(function()
    while true do
        wait(1)
        -- 24/7 monitoring (empty for now, can add checks)
    end
end)
`;

        // Obfuscation functions
        function obfuscate(type) {
            let code = document.getElementById('inputCode').value || defaultCode;
            let output = '';
            const antiTamper = document.getElementById('antiTamper').checked;
            const maxProtection = document.getElementById('maxProtection').checked;
            const protection247 = document.getElementById('24Protection').checked;
            const over80kb = document.getElementById('over80kb').checked;

            let temp = code;

            if (type === 'base64' || type === 'max') {
                temp = temp.replace(/"([^"]*)"/g, (match, str) => {
                    return `b64decode("${btoa(str)}")`;
                });
            }

            if (type === 'xor' || type === 'max') {
                temp = temp.replace(/"([^"]*)"/g, (match, str) => {
                    let encrypted = '';
                    for (let i = 0; i < str.length; i++) {
                        encrypted += String.fromCharCode(str.charCodeAt(i) ^ 42);
                    }
                    return `xorDecode("${encrypted.replace(/"/g, '\\"')}", 42)`;
                });
            }

            if (type === 'rename' || type === 'max') {
                temp = temp
                    .replace(/\blocal\s+(\w+)/g, (match, varName) => {
                        return `local ${randomString(15)}`;
                    })
                    .replace(/\b(greet|player|name|i)\b/g, (match) => {
                        return randomString(15);
                    })
                    .replace(/\bfunction\s+(\w+)/g, (match, funcName) => {
                        return `function ${randomString(15)}`;
                    });
            }

            if (type === 'control' || type === 'max') {
                const junkCode = `
if ${randomString(10)} == math.random(1, 100) then
    local ${randomString(12)} = math.sin(math.random())
else
    local ${randomString(12)} = math.cos(math.random())
end
`;
                const lines = temp.split('\n');
                temp = lines.join('\n' + junkCode) + '\n' + junkCode;
            }

            // Apply toggles
            if (antiTamper) {
                // Add anti-tamper (use a placeholder hash; in real use, compute actual hash)
                temp = antiTamperFn.replace('${placeholder}', randomString(32)) + temp;
            }

            if (protection247) {
                temp = protection247Fn + temp;
            }

            if (maxProtection) {
                // Enhance with more layers (e.g., double encode strings)
                temp = temp.replace(/b64decode\("([^"]*)"\)/g, (match, encoded) => {
                    let doubleEncoded = btoa(atob(encoded));  // Double Base64
                    return `b64decode("${doubleEncoded}")`;
                });
            }

            if (over80kb) {
                // Add junk to make >80KB (repeat junk code many times)
                let junk = '';
                const junkBlock = `local ${randomString(10)} = math.random(); -- junk\n`.repeat(1000);  // ~10KB per 1000 lines
                for (let i = 0; i < 10; i++) {  // Aim for >80KB
                    junk += junkBlock;
                }
                temp = junk + temp + junk;
            }

            // Prepend decoders if needed
            if (type === 'base64' || type === 'max') {
                output += base64DecodeFn;
            }
            if (type === 'xor' || type === 'max') {
                output += xorDecodeFn;
            }

            output += temp;
            document.getElementById('output').textContent = output;
        }

        // Copy code to clipboard
        function copyCode() {
            const output = document.getElementById('output').textContent;
            navigator.clipboard.writeText(output).then(() => {
                alert('Code copied to clipboard!');
            }).catch(err => {
                alert('Failed to copy: ' + err);
            });
        }

        // Generate random string for variable names
        function randomString(length) {
            const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_';
            let result = '_';
            for (let i = 0; i < length - 1; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        // Base64 encode (built-in btoa for simplicity)
        function btoa(str) {
            return btoa(unescape(encodeURIComponent(str)));
        }

        function atob(str) {
            return decodeURIComponent(escape(window.atob(str)));
        }
    </script>
</body>
</html>
